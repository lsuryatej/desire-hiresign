# DesignHire API

FastAPI backend for the DesignHire marketplace application.

## Quick Start

### Prerequisites

- Python 3.11+
- PostgreSQL 15+
- Redis 7+
- MinIO (S3-compatible storage)

### Installation

1. **Create virtual environment**
   ```bash
   python -m venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   ```

2. **Install dependencies**
   ```bash
   pip install -e ".[dev]"
   ```

3. **Configure environment**
   ```bash
   cp env.example .env
   # Edit .env with your configuration
   ```

4. **Run database migrations**
   ```bash
   alembic upgrade head
   ```

5. **Start the API server**
   ```bash
   uvicorn app.main:app --reload
   ```

API will be available at http://localhost:8000
- API Docs: http://localhost:8000/docs
- Health Check: http://localhost:8000/health

## Development

### Running Tests

```bash
# Run all tests
pytest

# Run with coverage
pytest --cov=app --cov-report=html

# Run specific test
pytest tests/test_auth.py
```

### Database Migrations

```bash
# Create new migration
alembic revision --autogenerate -m "Description"

# Apply migrations
alembic upgrade head

# Rollback last migration
alembic downgrade -1

# View migration history
alembic history
```

### Code Quality

```bash
# Format code
black app tests

# Lint
flake8 app tests

# Type check
mypy app
```

## Project Structure

```
api/
├── app/
│   ├── core/          # Core configuration and utilities
│   ├── models/        # SQLAlchemy models
│   ├── routers/       # API route handlers
│   ├── schemas/       # Pydantic schemas
│   ├── services/      # Business logic
│   ├── tasks/         # Background tasks
│   ├── main.py        # FastAPI app
│   └── worker.py      # Background worker
├── alembic/           # Database migrations
├── tests/             # Test suite
└── scripts/           # Utility scripts
```

## Environment Variables

See `env.example` for all available environment variables.

Key variables:
- `POSTGRES_URL` - PostgreSQL connection string
- `REDIS_URL` - Redis connection string
- `MINIO_ENDPOINT` - MinIO endpoint URL
- `JWT_SECRET` - Secret key for JWT tokens
- `DEBUG` - Enable debug mode

## API Documentation

API documentation is auto-generated by FastAPI and available at:
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

## Contributing

See the main [CONTRIBUTING.md](../CONTRIBUTING.md) for guidelines.
